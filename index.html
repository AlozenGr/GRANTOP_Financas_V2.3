<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GRANTOP • Finanças V2.3</title>
  <link rel="icon" type="image/png" href="logo.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #0f172a; color: #e2e8f0; }
    .card { background: #1e293b; border-radius: 12px; padding: 16px; margin-bottom: 20px; }
    .btn { padding: 8px 16px; border-radius: 8px; font-weight: bold; }
    .btn-primary { background: #3b82f6; color: white; }
    .btn-danger { background: #ef4444; color: white; }
    .hidden { display: none; }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-start p-6">

  <!-- LOGIN -->
  <div id="loginScreen" class="flex flex-col items-center justify-center h-screen w-full">
    <img src="logo.png" alt="GRANTOP" class="h-20 mb-4" />
    <div class="card w-full max-w-sm text-center">
      <h2 class="text-lg font-bold mb-2">Acesso restrito</h2>
      <p class="text-sm mb-4">Informe o PIN para entrar.</p>
      <input id="pinInput" type="password" placeholder="PIN" 
             class="w-full p-2 rounded mb-3 text-black" />
      <button onclick="checkPIN()" class="btn btn-primary w-full">Entrar</button>
    </div>
  </div>

  <!-- APP -->
  <div id="appScreen" class="hidden w-full max-w-6xl">
    <header class="flex items-center justify-between mb-6">
      <div class="flex items-center gap-3">
        <img src="logo.png" alt="Logo" class="h-12" />
        <h1 class="text-2xl font-bold">GRANTOP • <span class="text-sky-400">Finanças</span></h1>
      </div>
      <button onclick="logout()" class="btn btn-danger">Sair (PIN)</button>
    </header>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
      <div class="card text-center">
        <p>Créditos (Total)</p>
        <h2 id="kpiCreditos" class="text-lg font-bold">R$ 0,00</h2>
      </div>
      <div class="card text-center">
        <p>Folha (Total)</p>
        <h2 id="kpiFolha" class="text-lg font-bold">R$ 0,00</h2>
      </div>
      <div class="card text-center">
        <p>Fixas Pendentes</p>
        <h2 id="kpiFixas" class="text-lg font-bold">R$ 0,00</h2>
      </div>
      <div class="card text-center">
        <p>Saldo Previsto</p>
        <h2 id="kpiSaldo" class="text-lg font-bold">R$ 0,00</h2>
      </div>
    </div>

    <!-- TABS -->
    <div class="flex gap-2 mb-6 flex-wrap">
      <button onclick="showTab('funcionarios')" class="btn btn-primary">Funcionários</button>
      <button onclick="showTab('creditos')" class="btn btn-primary">Créditos</button>
      <button onclick="showTab('contasfixas')" class="btn btn-primary">Contas Fixas</button>
      <button onclick="showTab('empresa')" class="btn btn-primary">Contas da Empresa</button>
      <button onclick="showTab('impparc')" class="btn btn-primary">Impostos Parcelados</button>
      <button onclick="showTab('imposto')" class="btn btn-primary">Imposto do Mês</button>
      <button onclick="showTab('clientes')" class="btn btn-primary">Clientes</button>
      <button onclick="showTab('resumo')" class="btn btn-primary">Resumo</button>
    </div>

    <!-- Funcionários -->
    <div id="tab-funcionarios" class="card hidden">
      <h2 class="font-bold mb-3">Funcionários</h2>
      <p>Cadastro e folha de pagamento dos funcionários.</p>
      <table class="w-full mt-4 text-sm">
        <thead><tr><th>ID</th><th>Nome</th><th>Salário</th><th>Total</th><th>Ações</th></tr></thead>
        <tbody id="funcionariosTable"></tbody>
      </table>
    </div>

    <!-- Créditos -->
    <div id="tab-creditos" class="card hidden">
      <h2 class="font-bold mb-3">Créditos</h2>
      <p>Faturamento e recebimentos.</p>
      <table class="w-full mt-4 text-sm">
        <thead><tr><th>Data</th><th>Cliente</th><th>Valor</th><th>Pago?</th><th>Ações</th></tr></thead>
        <tbody id="creditosTable"></tbody>
      </table>
    </div>

    <!-- Placeholder outras abas -->
    <div id="tab-contasfixas" class="card hidden">Em breve: Contas Fixas...</div>
    <div id="tab-empresa" class="card hidden">Em breve: Contas da Empresa...</div>
    <div id="tab-impparc" class="card hidden">Em breve: Impostos Parcelados...</div>
    <div id="tab-imposto" class="card hidden">Em breve: Imposto do Mês...</div>
    <div id="tab-clientes" class="card hidden">Em breve: Clientes...</div>
    <div id="tab-resumo" class="card hidden">Em breve: Resumo...</div>

  </div>

  <!-- CONFIG -->
  <script>
    (function () {
      const CFG = {
        API_URL: "https://script.google.com/macros/s/AKfycbyK02FLumiQoyMjVDvArN99hihh4fQ0M8husKp-aO6Pc-KSDfgI5T1dy4g8Vpqxw5YCUA/exec",
        TOKEN: "2400",
        SS_ID: "1SpUt8UqoQz_AhZEuotv_xYVTRi-0iUtZwMVZmTLztJk",
        UI_PIN: "2400"
      };
      window.GRANTOP_CFG = CFG;
    })();
  </script>

  <!-- JS -->
  <script>
    const loginScreen = document.getElementById("loginScreen");
    const appScreen = document.getElementById("appScreen");

    function checkPIN() {
      const pin = document.getElementById("pinInput").value.trim();
      if (pin === GRANTOP_CFG.UI_PIN) {
        loginScreen.classList.add("hidden");
        appScreen.classList.remove("hidden");
      } else {
        alert("PIN inválido!");
      }
    }

    function logout() {
      appScreen.classList.add("hidden");
      loginScreen.classList.remove("hidden");
      document.getElementById("pinInput").value = "";
    }

    function showTab(tab) {
      document.querySelectorAll("[id^='tab-']").forEach(el => el.classList.add("hidden"));
      document.getElementById("tab-" + tab).classList.remove("hidden");
    }
  </script>
</body>
</html>
